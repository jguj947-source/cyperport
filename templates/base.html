<!DOCTYPE html>
<html lang="{{ lang }}" dir="{{ 'rtl' if lang == 'ar' else 'ltr' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header & Navigation -->
    <header>
        <div class="navbar">
            <a href="{{ url_for('index') }}" class="logo">
                <div class="logo-icon">ğŸ›¡ï¸</div>
                <span>{% if lang == 'en' %}Cybersecurity Portal{% else %}Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ{% endif %}</span>
            </a>
            
            <ul class="nav-menu">
                <li><a href="{{ url_for('index') }}">{% if lang == 'en' %}Home{% else %}Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©{% endif %}</a></li>
                <li><a href="{{ url_for('articles') }}">{% if lang == 'en' %}Articles{% else %}Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª{% endif %}</a></li>
                <li><a href="{{ url_for('quizzes') }}">{% if lang == 'en' %}Quizzes{% else %}Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª{% endif %}</a></li>
                <li><a href="{{ url_for('tips') }}">{% if lang == 'en' %}Security Tips{% else %}Ù†ØµØ§Ø¦Ø­ Ø£Ù…Ù†ÙŠØ©{% endif %}</a></li>
                <li><a href="{{ url_for('alerts') }}">{% if lang == 'en' %}Fraud Alerts{% else %}ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„{% endif %}</a></li>
            </ul>
            
            <div class="nav-actions">
                {% if session.get('user_id') %}
                    {% if session.get('user_role') == 'admin' %}
                        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-sm">{% if lang == 'en' %}Admin Dashboard{% else %}Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…{% endif %}</a>
                    {% endif %}
                    <a href="{{ url_for('submit_report') }}" class="btn btn-primary btn-sm">{% if lang == 'en' %}Report Vulnerability{% else %}Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø«ØºØ±Ø©{% endif %}</a>
                    <a href="{{ url_for('logout') }}" class="btn btn-secondary btn-sm">{% if lang == 'en' %}Logout{% else %}ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬{% endif %}</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-secondary btn-sm">{% if lang == 'en' %}Login{% else %}ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„{% endif %}</a>
                    <a href="{{ url_for('register') }}" class="btn btn-primary btn-sm">{% if lang == 'en' %}Sign Up{% else %}Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨{% endif %}</a>
                {% endif %}
                
                <div class="language-selector">
                    <a href="{{ url_for('set_language', language='ar') }}" {% if lang == 'ar' %}style="background-color: var(--primary-light); border-color: var(--primary-color);"{% endif %}>AR</a>
                    <a href="{{ url_for('set_language', language='en') }}" {% if lang == 'en' %}style="background-color: var(--primary-light); border-color: var(--primary-color);"{% endif %}>EN</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container" style="margin-top: 1rem;">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'success' if category == 'success' else 'danger' if category == 'danger' else 'warning' }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>Â© 2025 {% if lang == 'en' %}Cybersecurity Portal. All rights reserved.{% else %}Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.{% endif %}</p>
            </div>
        </div>
    </footer>

    {% block extra_js %}{% endblock %}
</body>
</html>
